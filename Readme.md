## 前言：勿骄勿躁，打好基础，以客户需求为出发点

 首周会议收获：通过前辈们的讲解，认识到了学习要脚踏实地的重要性。并且认识到对于企业而言，写可阅读性强的技术文档的重要性。

***\*第二周任务：\****

- 完成AC695N的SDK文档熟悉，包括编译验证。
- 

## 文档资料指南

[工程应用技术应用文档](https://kdocs.cn/l/cpFuA4qTguho)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/2X3IZUY2ACQGE?)

***截图参考***

非常好的调试教程

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/WH3RHZY2ACAA6?)



### 1.1.芯片doc文件



#### ***\*1.1.1.SDK介绍文档：\****

一般是整个芯片系统的介绍，包括APP消息、APP模式管理、蓝牙模块的使用等等；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/ZNOJDUY2ADAAK?)



#### ***\*1.1.2功能详细设计文档：\****

具体解释每一个细分功能的应用原理，例如运用蓝牙模式、广播模式、TWS模式等等，适合在使用一个具体模块时进行查阅参考。

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/ORUZJUY2ADQBA?)



![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/JUYZNUY2ACACA?)

 

## AC695N-SDK资料阅读

***\*前言：\****

对于每一个文档介绍的函数功能都尽可能地去调用编译到开发板上验证结果。

### 2.1 AC695N-SDK 介绍文档

之所以先使用AC695N的SDK来进行学习，是因为AC695N的SDK版本更新地更加完善，都更新到了V3.1.2版本了。

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/THFPVVI2ABAHG?)

#### 2.1.1模式流程的详细介绍

![po_bhcehbijjijida](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/YMHRHVQ2ADAG6?)

***\*串口打印验证上述流程：\****

验证方法：在执行语句前加上打印语句

```
static void  tone_play_end_callback(void *priv, int flag)
{
    int index = (int)priv;

    if (APP_POWERON_TASK != app_get_curr_task()) {
        log_error("tone callback task out \n");
        return;
    }

    switch (index) {
    case IDEX_TONE_POWER_ON:
        log_info("tone_play_end_callback()->power_on_init()\n");
        //在执行语句前加上日志打印；
        power_on_init();
        break;
    }
}
```

***\*验证成功\****

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/NJDEPVQ2AAADK?)



## 蓝牙应用详细设计说明书阅读

### 3.1蓝牙消息处理流程

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/7AMVD6Q2ADQFQ?)



![po_bhcehfghbchija](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/EAJT7WY2ABQGW?)



***\*串口打印验证上述流程：\****

验证方法：在执行语句前加上打印语句

```
//截取部分代码
void app_bt_task()
{
.....
while (1) {
        //日志打印语句
        log_info("bt_task_start()->app_task_get_msg()\n");
        app_task_get_msg(msg, ARRAY_SIZE(msg), 1);
        
        switch (msg[0]) {
        case APP_MSG_SYS_EVENT:
            if (bt_sys_event_handler((struct sys_event *)(msg + 1)) == false) {
                //日志打印语句
                log_info("bt_sys_event_office()->app_default_event_deal()\n");
                app_default_event_deal((struct sys_event *)(&msg[1]));
            }
            break;
        default:
            break;
        }

....
}
//截取部分代码
int bt_sys_event_office(struct sys_event *event)
{    
    //日志打印语句
    log_info("bt_sys_event_office()\n");
    u8 ret = false;
    if ((u32)event->arg == SYS_BT_EVENT_TYPE_CON_STATUS) {
        //日志打印语句
        log_info("bt_sys_event_office()->bt_connction_status_event_handler()\n");
        bt_connction_status_event_handler(&event->u.bt);
    } else if ((u32)event->arg == SYS_BT_EVENT_TYPE_HCI_STATUS) {
        //日志打印语句
        log_info("bt_sys_event_office()->bt_hci_event_handler()\n");
        bt_hci_event_handler(&event->u.bt);
    } else if ((u32)event->arg == SYS_BT_EVENT_FORM_SELF) {
        bt_reverb_status_change(&event->u.bt);
    }
...
}
```

验证成功

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/2GIV5WA2ACQFU?)



![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/EV4WFWA2ACQGQ?)



如果事件在蓝牙模式里面没有处理，消息就会传递到app_default_event_deal()函数处理；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/E4JXZWA2AAQEQ?)



![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/ITTX3WA2ADQAU?)

#### 3.1.1 以手机连接蓝牙为例

![po_bhcehgcdbbeaja](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/YJKZNZQ2ABAD4?)

![po_bhcfdcihihfhfa](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/3IOWP6Q2ADQCC?)

```
//截取部分代码
tatic int bt_hci_event_handler(struct bt_event *bt)
{
    //日志打印
    //对应原来的蓝牙连接上断开处理函数  ,bt->value=reason
    log_debug("------------------------bt_hci_event_handler reason %x %x", bt->event, bt->value);
...
     switch (bt->event) {
        case HCI_EVENT_INQUIRY_COMPLETE:
            log_info(" HCI_EVENT_INQUIRY_COMPLETE \n");
            bt_hci_event_inquiry(bt);
            break;
        ...
        case BTSTACK_EVENT_HCI_CONNECTIONS_DELETE:
        case HCI_EVENT_CONNECTION_COMPLETE:
            //日志打印
            log_info("bt_hci_event_handler()->HCI_EVENT_CONNECTION_COMPLETE\n");
            log_info(" HCI_EVENT_CONNECTION_COMPLETE \n");
            switch (bt->value) {
            case ERROR_CODE_SUCCESS :
                //日志打印
                log_info("ERROR_CODE_SUCCESS  \n");
                bt_hci_event_connection(bt);
                break;
           ...
}
```

等待手机连接

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/DEKKPWA2ABQES?)

连接成功

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/NT2KVWA2ABQGS?)

### 3.2蓝牙进入退出模式流程

**未连接设备**

![po_bhcehdjfhgbcja](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/FTSXPVY2AAAEI?)

***\*串口打印验证上述流程：\****

验证方法：在执行语句前加上打印语句

```
//部分代码
void app_bt_task()
{
    int res;
    int msg[32];
    ui_update_status(STATUS_EXIT_LOWPOWER);
    //日志打印语句
    log_info("app_bt_task()->bt_task_init()\n");
    bt_task_init();//初始化变量、时钟、显示(未进行协议栈初始化)

#if TCFG_TONE2TWS_ENABLE
    extern void tone2tws_bt_task_start(u8 tone_play);
    tone2tws_bt_task_start(!__this->cmd_flag);
#endif

    extern u8 get_tws_background_connected_flag();
    if (!__this->cmd_flag && (!get_tws_background_connected_flag())) { //蓝牙后台拉回蓝牙模式不播放提示音
        //日志打印语句
        log_info("init_ok->tone_play_with_callback_by_name()\n");
        tone_play_with_callback_by_name(tone_table[IDEX_TONE_BT_MODE], 1, bt_tone_play_end_callback, (void *)IDEX_TONE_BT_MODE);
        //协议栈初始化在提示音结束进行
    }
........ //省略的代码

 while (1) {
        //日志打印语句
        log_info("bt_task_start()->app_task_get_msg()\n");
        app_task_get_msg(msg, ARRAY_SIZE(msg), 1);
        
        switch (msg[0]) {
        case APP_MSG_SYS_EVENT:
            if (bt_sys_event_handler((struct sys_event *)(msg + 1)) == false) {
                app_default_event_deal((struct sys_event *)(&msg[1]));
            }
            break;
        default:
            break;
        }
...
}
```

***\*验证成功\****

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/IH2HTVY2ACACY?)

## 开发环境配置以及出现的问题

**技术支持：关FH&李TY**

### 4.1 Code Block 常见问题

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/CNKBRXI2AAQCC?)

[官方文档入口](https://doc.zh-jieli.com/Tools/zh-cn/dev_tools/codeblocks/howto_view_toolset.html)：遇到问题可以去官方文档查看

#### 4.1.1 Code Block 编译无法生成tools下载文件



缺少tools文件夹

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/KD4LJXI2ABQB6?)

将文件名里的'-master'删掉，并且移动至C盘根目录

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/CKDLPXI2AAAH6?)



![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/HF53JXI2ACAEG?)

成功编译生成tools文件夹

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/5P7LTXI2AAQA4?)

#### 4.1.2 克隆的文件无法在Code Blocks 上跳出日志

解决方法：

直接使用Beyond Compare 文件对比工具，对比能正常打印出日志的文件，可以发现Release_file.bat文件的最后一行不同，直接修改成一样的；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/QZ5755I2ABAHG?)

修改前与修改后的文件详细可以到GitLab的推送信息查看，红色为修改前的部分，绿色为修改后的部分；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/PICQD5Q2ACAEM?)



#### 4.1.3 Beyond Compare 文件对比工具

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/5QM5FXI2ABQGQ?)

通过文件对比工具，可以了解到官网打包工具与耳机所用的打包工具的不同

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/ZRW5HXI2ADQCC?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/GHKNHXI2ADQAG?)

比较结果为两个打包工具的版本号不同，官网的为最新的

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/CM7NLXI2ADQDM?)

## 永**客户无线耳机调试

**注意事项：一般客户都是用Code Blocks编译的，为了保证不出错，因此Vs Code建议仅作为代码修改，查阅，工程师与客户同步使用Code Blocks编译。**

### 5.1调节耳机音量断连问题

问题出现现象

#### 5.1.1测试手动控制音量断连问题

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/4EX6PXI2ABQFY?)

验证结果：

存在客户所测试到的问题，并且与客户所测试的问题现象一致；

#### 5.1.2 测试自动控制音量断连问题

 

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/CMV7RYQ2ACABE?)

测试结果：

***\*自动调节音量中未遇到蓝牙断连情况，断连可能是因为手动控制音量时挡到了蓝牙天线；\****



### 5.2 客户需求：取消耳机拔出自动开机启动功能



找到板级配置文件board_config.h

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/AQ7GXYA2ADAGA?)



Ctrl+F 搜索“”拔出“”，将拔出自动开机功能的宏定义由“ENABLE”改成“DISABLE”；

Ctrl + S 保存，退出Vs Code，到Code Blocks进行编译；



#### 5.2.1 升级文件提交给客户

注意事项：

查看项目名是否与客户的设备名称一致，修改负责人名字缩写，填上更新内容；

删除为更新内容的日志；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/GJYYJYA2ABAA6?)

***\*修改之后\****

将文件压缩打包给客户

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/UD3ORYA2ADAES?)

将writer.txt文件内容改为自己的名字大写缩写

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/XTRAN5Q2ACAHE?)



### 5.3 客户需求：开机状态灯改为蓝色呼吸灯模式

需求判断：蓝色呼吸灯属于UI范畴，因此先到user_cfg.c文件是否使能了配置工具

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/4KCFX3A2ABAHE?)

发现灯的状态未被配置，因此到板级配置文件来修改灯的状态；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/OXVGZ3A2AAQBC?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/4VAG33A2ACABE?)

#### 5.3.1 客户反馈灯未亮起

首先查看代码，直接搜索pwm_led_mode()，看在哪被调用了；

查询到时在ui_manage.c  UI管理文件被调用了，可以看出，呼吸灯应该被调用了；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/2WQZB3A2ACQFU?)

排查故障：

- 因为客户的上一个需求是关闭拔出耳机开机功能，会不会客户未开机，所以没看到灯闪；
- 我的编译出了问题；



需要验证上述问题，便需要把程序升级到样机上，并开启串口打印；

但是在使用一拖二蓝牙测试盒时遇到了问题

#### 5.3.2 灯没有让其持续做呼吸状态

指导：FH bro

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/OXVGZ3A2AAQBC?)

可以看到我只在power.on的任务下开启了呼吸灯模式，而这个效果仅在短时间内就被下面的模式给关闭了；

因此需要在除关机模式都把呼吸灯开启；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/KCK7V5I2AAQCC?)

### 5.4 客户需求：将开机默认打开辅听改为双击切换辅听，并增加切换提示音“嘟”；

#### 5.4.1问题分析：

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/YDTY37Y2ACADY?)

由之前更新日志可知，助听模式其实为辅听，之前的是默认开机打开辅听功能；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/LJFI77Y2AAQB6?)

***\*解决思路：\****

- 从日志来看，之前是有修改过辅听功能；
- 能够看出客户提的需求并不够详细，因此需要进一步确定客户的需求；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/STBHEAA3ABQFM?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/VNKXGAA3ABQB6?)

在搞清楚客户需求之后，便可以开始分析；

#### 5.4.2 解决问题

指导：GFH

客户需求：将原本由三击实现的功能改为由双击实现，并且添加提示音；

1. 分别找到三击和双击的功能所在位置；

按键消息设置，将原本的三击功能关闭，即NULL空就好，在将双击的功能改为辅听；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/LHEXSAA3ABAHG?)

1. 添加双击切换提示音

打开配置工具，将提示音音频放进去，点击保存；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/KGKX6AA3ADAFU?)

再保存bin文件；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/55IIIAA3AAABQ?)

在回到程序里继续配置提示音；

模仿上面的提示音路径配置：（以后注意，不要有中文路径）

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/VJ52KAA3ADQAG?)

最后到按键处理函数里的辅听功能处添加提示音（注意要看宏是否有正确的值）

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/WGAPABI3ABQCW?)

#### 5.4.3 客户反馈问题

##### 5.4.3.1每次双击都是重启耳机，不是切换助听等级

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/GMCPOBI3AAQH4?)

发现是在配置提示音时，使用了中文路径；

并且播放提示音的函数调用错了；

修改：

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/UKJ7SBI3ACQEU?)

一定要使用有实际值的宏；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/WVG7WBI3ADQDQ?)

##### 5.4.3.2助听只有一档，且双击后需要等很久才有提示音

点击进入tone_play()函数，发写说明里写着辅听和提示音有着较强的相关性；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/OEVQCBQ3ADADI?)

于是直接在整个程序里直接搜索“辅听”二字；发现在板级文件里“辅听与提示音互斥”

于是关掉该功能

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/FKFQGBQ3AAACU?)

##### 5.4.3.3 客户认为提示音声量过小

去网上将客户发的音量文件给增益，然后直接将文件导入配置工具；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/ET4QQBQ3ABAHS?)

完成客户要求；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/ANPAUBQ3AAAC6?)

### 5.4.5 提交并推送文件到GitLab

***\*注意：\*******\**\*\*在提交时不要勾选修改上次提交，不然可能会产生冲突；\*\*\*\****

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/7A4BCBQ3ABQC6?)

成功提交！

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/MSERCBQ3ACQB6?)

修改内容：

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/DLIRIBQ3ABQHU?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/KXPRIBQ3ADABA?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/LXWRIBQ3ACQGG?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/GL7RIBQ3ABAD6?)



## 阅读产品SDK文档与熟悉代码



### 6.1 board_config.h 板级配置文件

未被注释的即为该样机的板级配置，选中找到对应头文件位置；

可以得知该样机的芯片型号为AC700N；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/MRVPJYA2ACACY?)

board_ac700n_demo_cfg.h 为各功能配置文件；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/OM57PYA2ABAH4?)

要使用在线配置工具，得先查看是否需要在程序代码上使能

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/AMYIRYI2ADAES?)

### 6.2 app_config.h应用模式配置文件

串口打印开关，一些APP模式在这个文件

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/IBNJNYI2ADAFY?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/QDCZNYI2ABQB6?)

### 6.3 user_cfg.h/c 用户配置文件

客户可以通过配置工具对这个文件里的参数进行修改；

客户一般改的最多的是样机的状态配置；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/WDO2NYI2ACQHE?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/2SJM7YI2ACQGQ?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/OLHM7YI2ADQAG?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/I4O5BYI2ABQB6?)

Vs Code 页面：

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/343KLYI2ADQB2?)

***user_cfg.h***

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/POK2XYI2ABQES?)

***user_cfg.c***



### 6.4 配置工具的使用

配置工具入口

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/VTP2TYA2ACQEU?)



打开各个工具，每个工具都有相应的功能；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/GC42PYA2ACQEO?)



配置工具，配置好想要的功能，点击保存会生成cf_tool.bin文件



![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/7TV2XYA2ABQCU?)

找到download.bat或者到Code Blocks里编译

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/ILG25YA2ADAFY?)

找到update.ufw升级文件，打开编辑FW文件，

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/PE23RYA2AAADG?)



### 6.5 一拖二蓝牙测试盒的使用



[杰理科技一拖二蓝牙测试盒用户手册](https://doc.zh-jieli.com/Tools/zh-cn/mass_prod_tools/testbox_1tuo2/tb_base_introduction.html)



长按PC模式按键，电脑会出现弹窗；

会出现CD驱动器，里面文件有蓝牙测试盒升级工具以及使用文档；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/PPDNPYA2ACQBW?)

将update.ufw升级文件拖至固件文件，蓝牙测试盒连上样机，点击获取待升级样机，在蓝牙地址有效的设备上勾选升级设备，点击升级样机；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/KE553YA2AAADK?)



### 6.6 TWS耳机开机流程

[工程应用技术应用文档](https://kdocs.cn/l/cpFuA4qTguho)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/QTGATYY2AAQEQ?)



```
void app_main(){

    int update = 0;
    u32 addr = 0, size = 0;
    struct intent it;


    log_info("app_main\n");
    app_var.start_time = timer_get_ms();
    
...

    if (!UPDATE_SUPPORT_DEV_IS_NULL()) {
        update = update_result_deal();
    }

    app_var_init(); //app模式初始化，该函数会播放开机提示音；
    
    init_intent(&it);
    it.name = "earphone";
    it.action = ACTION_EARPHONE_MAIN;
    start_app(&it); //启动耳机功能，包括TWS模式；

...

}
```

搜索earphone，找到earphone.c文件，并且找到star_app()函数；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/DRJQDYY2AAQEU?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/GYPAJYY2ACQHE?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/XNNQJYY2ABADA?)



## Git环境配置

### 7.1 SSH Key 配置

公司项目需要使用公司所给账号和公司网络才能登上；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/4Z7NJ4Q2ABQC4?)

找到PuTTY生成密钥，生成密钥时不断在软件窗口内滑动，加快生成密钥；

并保存密钥和私钥，密钥需要自己起名字保存；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/GJFNB5I2ADAES?)



![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/V3C435I2ACQFU?)

在打开Pageant，添加私钥；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/LIOND5I2ACAA6?)

将公钥复制到Gitlab上的SSH Keys 配置

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/IDWNV4Q2ABACQ?)

### 7.2 提交与推送

点击克隆，选择HTTP的地址复制；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/EO5NR5I2ACAG4?)

注意：是在分支那克隆的，但是实际上当你在文件夹里克隆之后，显示的还是主文件；

因此克隆完需要切换分支；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/O7H535I2ABQFI?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/RRK555I2AAAFE?)



提交的话，要注意提交到哪里去；

提交只是提交到本地的库，而推送是推送的远程；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/DWMOJ5I2AAAH6?)

提交推送成功！回到GitLab会有推送信息，包括修改的信息；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/HI6PH5I2ABQCO?)

绿色为修改之后的部分，红色为修改前的部分；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/TTLPH5I2ACQD6?)

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/4LUPH5I2ACQEY?)



### 7.3 注意事项：克隆相关一直显示密码输入

解决方法：

需要在TortoiseGit的设置里，网络这里的默认启动应用改为TortoisePlink.exe

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/22UOX5I2ABQGS?)

找到刚刚保存好的密钥，在今后的操作里一旦出现加载密钥的选项就把它勾选上；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/6OV655I2AAQEU?)

## 软件调试方法

[工程应用技术应用文档](https://kdocs.cn/l/cpFuA4qTguho)

进去文档详细查看即可；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/AHBDT6Q2AAQH4?)

# 二、杰理实习第三周日志

前言：

上周的任务是先熟悉好资料较为完善的SDK，我所选择的是AC695N，在熟悉完蓝牙的流程之后；蓝牙部门那边将某款客户的耳机测试部分交给了我帮忙，并且还帮忙为客户工程做维护工作；当然测试工作与客户工程的维护工作还未结束，在这空闲的档期，继续将第一周时委派的任务——验证公版程序是否存在如客户所说的bug。

## 1.问题分析：

检查这个JL701N 1.0.0版本的音响SDK是否有如下问题:

- 开机进入其他模式连接不了无线麦，并且开机进入其他模式需要初始化蓝牙；
- 报完提示音后有线话筒没有声音，需要重现初始化麦克风音量才有声音；

![img](http://www.kdocs.cn/api/v3/office/copy/VUFNU21XUHlSV0V5RGF0aUpUUnZzYVFqN3M4cng1OGE2YndmbzZVN3BDb1kxcjNub1hNaDJsR3NrWDdERW9pdzc1Z1hKZEhINWlleE00ZEtMOTlVZ202Tk9WUVVyNzNmUTk1S3FobTZsY0lhWERTM0FaR1RzVk5RVGI3NEVPSUxpZVZmbm1zejV0S2EzcUxOcWNOUVBPcFhBemc4R2c5OGxWWjRUWWZDV2lCdWFpSEhJMVFaNkxYQnpzM2lXUDBrZWhtZDlaQ3ZveEhqbUtNY3NEaFBoU3JRNkFYNC9sY0svZTlYTFpGZ0VlUUJlZm5LOVJsWHRNMzkzQmM0VG1ESTVUaTNKOTVVY09RPQ==/attach/object/I3QFZ7Y2ABAFG?)

### 1.1 查询JL701N 1.0.0版本SDK的板级配置